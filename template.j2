{% for device in device_list %}
############################### Configurazione {{device.name}} #############################
en
configure terminal
snmp-server community {{env_data.snmpv2c_string}}
snmp-server host 172.16.90.78 {{env_data.snmpv2c_string}}
enable secret {{env_data.password}}
crypto key generate rsa modulus 1024
username {{env_data.username}} secret {{env_data.password}}
ip ssh version 2
line vty 0 15
transport input ssh
login local
hostname {{device.name}}
{% if device.is_a_router %}
interface GigabitEthernet0/0
ip address {{device.ipv4_address}} {{device.ipv4_mask}}
{%else%}
interface GigabitEthernet0/1
no switchport
ip address {{device.ipv4_address}} {{device.ipv4_mask}}
{%endif%}
no shutdown
end
copy running-config startup-config
{%endfor%}
